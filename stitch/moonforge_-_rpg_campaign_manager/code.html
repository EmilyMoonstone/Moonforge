<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>MoonForge - RPG Campaign Manager</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans:wght@400;500;700;900&family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#3211d4",
                        "primary-hover": "#260ca3",
                        "primary-light": "#5a3ae0",
                        "background-light": "#f6f6f8",
                        "background-dark": "#131022",
                        "surface-dark": "#1e1c29", 
                        "surface-darker": "#0f0e15",
                        "surface-light": "#26213b",
                        "border-dark": "#2b2839",
                        "text-secondary": "#a19db9"
                    },
                    fontFamily: {
                        "display": ["Be Vietnam Pro", "sans-serif"],
                        "body": ["Noto Sans", "sans-serif"],
                        "mono": ["ui-monospace", "SFMono-Regular", "Menlo", "Monaco", "Consolas", "Liberation Mono", "Courier New", "monospace"],
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "2xl": "1rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    
    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #131022; 
        }
        ::-webkit-scrollbar-thumb {
            background: #2b2839; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #3211d4; 
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .filled {
            font-variation-settings: 'FILL' 1;
        }
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
        }
    </style>

    <!-- React & Router -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/history@5/umd/history.development.js"></script>
    <script src="https://unpkg.com/react-router@6.3.0/umd/react-router.development.js"></script>
    <script src="https://unpkg.com/react-router-dom@6.3.0/umd/react-router-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-white h-screen overflow-hidden">
    <div id="root" class="h-full"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { createRoot } = ReactDOM;
        const { MemoryRouter, Routes, Route, Link, useNavigate, useLocation } = ReactRouterDOM;

        // --- Shared Components ---

        const TopNav = () => {
            const navigate = useNavigate();
            const location = useLocation();

            const navItems = [
                { name: 'Dashboard', path: '/dashboard' },
                { name: 'Campaign', path: '/campaign-details' }, // Specific campaign view
                { name: 'Compendium', path: '/compendium' },
                { name: 'Groups', path: '/groups' },
                { name: 'Settings', path: '/settings' },
            ];

            return (
                <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-border-dark bg-[#121118] px-6 py-3 sticky top-0 z-50 h-16 shrink-0">
                    <div class="flex items-center gap-8">
                        <Link to="/dashboard" class="flex items-center gap-4 text-white">
                            <div class="size-8 text-primary">
                                <span class="material-symbols-outlined text-[32px]">swords</span>
                            </div>
                            <h2 class="text-white text-lg font-bold leading-tight tracking-[-0.015em] hidden md:block">MoonForge</h2>
                        </Link>
                        <div class="hidden md:flex items-center gap-2">
                            {navItems.map(item => (
                                <Link 
                                    key={item.name}
                                    to={item.path} 
                                    class={`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${
                                        location.pathname.startsWith(item.path) || (item.path === '/campaign-details' && location.pathname.includes('campaign'))
                                        ? 'text-white bg-primary' 
                                        : 'text-text-secondary hover:text-white hover:bg-white/5'
                                    }`}
                                >
                                    {item.name}
                                </Link>
                            ))}
                        </div>
                    </div>
                    <div class="flex flex-1 justify-end gap-6 items-center">
                        <div class="hidden md:flex flex-col min-w-40 !h-9 max-w-64">
                            <div class="flex w-full flex-1 items-stretch rounded-lg h-full border border-border-dark focus-within:border-primary transition-colors bg-surface-dark">
                                <div class="text-text-secondary flex border-none items-center justify-center pl-3 rounded-l-lg border-r-0">
                                    <span class="material-symbols-outlined text-[18px]">search</span>
                                </div>
                                <input class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-white focus:outline-0 focus:ring-0 border-none bg-transparent focus:border-none h-full placeholder:text-text-secondary px-3 rounded-l-none border-l-0 pl-2 text-sm font-normal leading-normal" placeholder="Search..." />
                            </div>
                        </div>
                        <div class="flex items-center gap-4">
                            <button class="text-slate-500 dark:text-[#a19db9] hover:text-primary transition-colors relative">
                                <span class="material-symbols-outlined">notifications</span>
                                <span class="absolute top-0 right-0 size-2 bg-red-500 rounded-full border-2 border-surface-light dark:border-surface-dark"></span>
                            </button>
                            <Link to="/settings" class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-9 border-2 border-border-dark hover:border-primary transition-colors cursor-pointer" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuD3qb_bAMlopx1du6EDYArTNNmC6XQ7yL2VlQ2a1tLKJ--qxwEzOai9loluw5NOrdbMrl7N8AdfC_V8baVbS61921gOSBp2WY-JR0q66ep5LknNoNUUHHwukUSQ5La1ejZXWRB4E-ZgJUo3DuyeSKioa8bEp2mpi2MTd1kd-90POsmcdbkFfZJHm-T88jq5QDIYLPjpqGXwl4ff7btW6MZ7B8KQonsarhSqWhn0xoIH0JN1s4hsn6LGSIvExw8WgKxOQ92UtEqKIOQ")'}}></Link>
                        </div>
                    </div>
                </header>
            );
        };

        const CampaignSidebar = () => {
            return (
                <aside class="hidden lg:flex flex-col w-72 bg-[#121118] border-r border-border-dark overflow-y-auto shrink-0 select-none custom-scrollbar">
                    <div class="p-4 border-b border-border-dark sticky top-0 bg-[#121118] z-20">
                        <button class="flex items-center justify-between w-full p-2 text-white bg-surface-dark rounded-lg border border-border-dark hover:border-primary transition-all group shadow-sm">
                            <div class="flex items-center gap-3 overflow-hidden">
                                <div class="size-8 rounded-md bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center text-white shrink-0 shadow-inner">
                                    <span class="material-symbols-outlined text-[18px]">castle</span>
                                </div>
                                <div class="flex flex-col items-start overflow-hidden">
                                    <span class="text-[10px] uppercase text-text-secondary font-bold tracking-wider leading-none mb-0.5">Campaign</span>
                                    <span class="font-bold text-sm truncate leading-none">The Azure King</span>
                                </div>
                            </div>
                            <span class="material-symbols-outlined text-text-secondary group-hover:text-white text-[20px]">expand_more</span>
                        </button>
                    </div>
                    <div class="flex flex-col py-4 px-3 gap-6">
                        <div class="flex flex-col gap-1">
                            <Link to="/campaign-details" class="flex items-center gap-3 px-3 py-2 text-text-secondary hover:text-white hover:bg-white/5 rounded-lg text-sm font-medium transition-colors group">
                                <span class="material-symbols-outlined text-[20px] group-hover:text-primary transition-colors">dashboard</span>
                                Overview
                            </Link>
                            <div class="flex flex-col">
                                <div class="flex items-center justify-between px-3 pt-2 pb-1">
                                    <span class="text-xs font-bold text-text-secondary uppercase tracking-wider">Narrative</span>
                                    <button class="text-text-secondary hover:text-white transition-colors" title="New Chapter">
                                        <span class="material-symbols-outlined text-[16px]">add</span>
                                    </button>
                                </div>
                                <div class="flex flex-col gap-1 mt-1">
                                    <Link to="/chapter-details" class="flex items-center gap-2 px-3 py-2 text-white font-medium rounded-t-md text-sm transition-colors w-full text-left bg-white/5">
                                        <span class="material-symbols-outlined text-[18px]">arrow_drop_down</span>
                                        <span class="material-symbols-outlined text-[18px] text-amber-500">book_2</span>
                                        <span class="truncate">Chapter 3: The Swamp</span>
                                    </Link>
                                    <div class="flex flex-col gap-0.5 pl-[19px] relative">
                                        <div class="absolute left-[11px] top-0 bottom-2 w-px bg-border-dark"></div>
                                        <Link to="/chapter-details" class="relative flex items-center gap-2 px-3 py-1.5 text-sm text-primary bg-primary/10 rounded-md ml-2 border-l-2 border-primary">
                                            Details & Adventures
                                        </Link>
                                        <Link to="/scene-editor" class="relative flex items-center gap-2 px-3 py-1.5 ml-2 text-text-secondary hover:text-white hover:bg-white/5 rounded-md text-sm transition-colors w-full text-left group border-l-2 border-transparent hover:border-text-secondary/50">
                                             <span class="material-symbols-outlined text-[18px] text-indigo-400">landscape</span>
                                             <span class="truncate">The Sunken Temple</span>
                                        </Link>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="w-full h-px bg-border-dark"></div>
                        <div class="flex flex-col gap-1">
                            <span class="px-3 text-xs font-bold text-text-secondary uppercase tracking-wider mb-2">Database</span>
                            <Link to="/maps" class="flex items-center gap-3 px-3 py-2 text-text-secondary hover:text-white hover:bg-white/5 rounded-lg text-sm font-medium transition-colors group">
                                <span class="material-symbols-outlined text-[20px] text-blue-400 group-hover:text-blue-300">map</span>
                                Maps
                            </Link>
                            <Link to="/entities" class="flex items-center gap-3 px-3 py-2 text-text-secondary hover:text-white hover:bg-white/5 rounded-lg text-sm font-medium transition-colors group">
                                <span class="material-symbols-outlined text-[20px] text-purple-400 group-hover:text-purple-300">person</span>
                                Entities
                            </Link>
                            <Link to="/encounters" class="flex items-center gap-3 px-3 py-2 text-text-secondary hover:text-white hover:bg-white/5 rounded-lg text-sm font-medium transition-colors group">
                                <span class="material-symbols-outlined text-[20px] text-red-400 group-hover:text-red-300">swords</span>
                                Encounters
                            </Link>
                        </div>
                    </div>
                </aside>
            )
        }

        // --- Screens ---

        const LoginScreen = () => {
            const navigate = useNavigate();
            return (
                <div class="bg-background-light dark:bg-background-dark font-display text-gray-900 dark:text-gray-100 min-h-screen flex items-center justify-center p-4">
                    <div class="w-full max-w-[1200px] h-[800px] max-h-[90vh] bg-white dark:bg-surface-dark rounded-xl shadow-2xl flex overflow-hidden border border-gray-200 dark:border-border-dark">
                        <div class="hidden lg:flex lg:w-1/2 relative bg-gray-900">
                            <div class="absolute inset-0 w-full h-full bg-cover bg-center" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuAmE0q4llAZwCwsGylIdX1YK360iuMZOqwiXMl2qEn2ArLF7mNIcDbQsZty2RjGMfkka_Nt8AWHf42Ca7w2rfgQeN2jAwzv2y_YnAYdXCRCYej9VgS9uKQVjsz0I2hhWZ8WColj7heHltouLBzf7y1CeQbU7ESN3WOwwuSoEA1zHYEEYxFLlpWUwTR2z4KQMEQwlkVpQpCEyXJguZk6WMHc51KT--P7fuiO6gvVc2BJUiVovQ42VsyYB7GAON119aze8rv3ZFaN5uY")'}}></div>
                            <div class="absolute inset-0 bg-gradient-to-t from-primary/90 to-transparent opacity-80 mix-blend-multiply"></div>
                            <div class="absolute inset-0 bg-gradient-to-b from-background-dark/40 to-background-dark/90"></div>
                            <div class="relative z-10 flex flex-col justify-between p-12 h-full text-white">
                                <div>
                                    <div class="flex items-center gap-2 mb-4">
                                        <span class="material-symbols-outlined text-4xl text-blue-400">swords</span>
                                        <span class="text-2xl font-bold tracking-tight">MoonForge</span>
                                    </div>
                                </div>
                                <div>
                                    <h2 class="text-4xl font-bold leading-tight mb-4 text-white">Forge Your Legend. <br/>Control Your Destiny.</h2>
                                    <p class="text-gray-300 text-lg max-w-md">Join thousands of dungeon masters and adventurers managing their campaigns with the power of the moon.</p>
                                </div>
                            </div>
                        </div>
                        <div class="w-full lg:w-1/2 flex flex-col relative bg-white dark:bg-[#131022]">
                            <div class="flex-1 overflow-y-auto px-8 py-10 md:px-16 md:py-12 flex flex-col justify-center">
                                <div class="mb-8 text-center">
                                    <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">Welcome Back</h1>
                                    <p class="text-gray-500 dark:text-gray-400">Enter your credentials to access the realm.</p>
                                </div>
                                <form class="space-y-5" onSubmit={(e) => { e.preventDefault(); navigate('/dashboard'); }}>
                                    <div class="space-y-2">
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Adventurer Name or Email</label>
                                        <div class="relative">
                                            <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 material-symbols-outlined text-[20px]">person</span>
                                            <input class="w-full pl-11 pr-4 py-3 bg-gray-50 dark:bg-[#1d1c27] border border-gray-200 dark:border-[#3f3b54] rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500" placeholder="Gandalf@shire.com" type="text"/>
                                        </div>
                                    </div>
                                    <div class="space-y-2">
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Secret Phrase</label>
                                        <div class="relative">
                                            <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 material-symbols-outlined text-[20px]">lock</span>
                                            <input class="w-full pl-11 pr-4 py-3 bg-gray-50 dark:bg-[#1d1c27] border border-gray-200 dark:border-[#3f3b54] rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500" placeholder="••••••••" type="password"/>
                                        </div>
                                    </div>
                                    <button class="w-full py-3.5 px-4 bg-primary hover:bg-primary-hover text-white font-semibold rounded-lg shadow-lg shadow-primary/25 transition-all active:scale-[0.98] flex items-center justify-center gap-2 group" type="submit">
                                        <span>Open the Gate</span>
                                        <span class="material-symbols-outlined text-[20px] group-hover:translate-x-1 transition-transform">arrow_forward</span>
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const DashboardScreen = () => {
            return (
                <div class="flex flex-col h-full w-full">
                    <TopNav />
                    <main class="flex-1 overflow-y-auto p-4 md:p-8 lg:p-10 scrollbar-thin bg-background-light dark:bg-background-dark relative">
                        <div class="max-w-7xl mx-auto flex flex-col gap-8">
                            <div class="flex flex-col md:flex-row justify-between items-start md:items-end gap-4">
                                <div class="flex flex-col gap-2">
                                    <h1 class="text-3xl md:text-4xl font-black tracking-tight dark:text-white">Your Campaigns</h1>
                                    <p class="text-slate-500 dark:text-[#a19db9] font-medium flex items-center gap-2">
                                        <span class="material-symbols-outlined text-sm">public</span>
                                        All changes saved to the Astral Plane
                                    </p>
                                </div>
                                <Link to="/campaign-details" class="flex items-center gap-2 px-5 py-3 rounded-lg bg-primary text-white font-bold hover:bg-primary/90 transition-all shadow-lg shadow-primary/30">
                                    <span class="material-symbols-outlined">add</span>
                                    <span>New Campaign</span>
                                </Link>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                                <Link to="/campaign-details" class="group flex flex-col bg-white dark:bg-surface-dark rounded-xl overflow-hidden border border-slate-200 dark:border-[#2b2839] hover:border-primary dark:hover:border-primary/50 transition-all hover:shadow-xl hover:shadow-primary/10 hover:-translate-y-1 cursor-pointer h-full">
                                    <div class="h-48 w-full bg-cover bg-center relative" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuDcpe3ZN2MX9UBcpndm_K2IfxVhQQkQankNUvyB3a-QYDWWrLdZX23SRrwqWtzM6mX_pU-MTMD3C6A7qCxpoCOViY7Vno-8PWu8u1KRYkH5cUrzeEiaU767Cr0XYXeXOCQu0hrAuub1SWFgQ-_6qekO_d0ailNJsweo6iYdxbyQ16osKhBGeQ9scweExFjoUqwRRaiZYiQvT7-KZl8E-jy4pwmNoyPsGPR9xC29ghtWY2UPZ0JcLMD8rMHTPbPN18bqAFJSUAQaFCo")'}}>
                                        <div class="absolute top-3 right-3 bg-black/60 backdrop-blur-sm text-white text-xs font-bold px-2 py-1 rounded border border-white/10">LVL 5</div>
                                    </div>
                                    <div class="p-5 flex flex-col flex-1 gap-4">
                                        <div>
                                            <h3 class="text-xl font-bold dark:text-white mb-1 group-hover:text-primary transition-colors">The Curse of Strahd</h3>
                                            <p class="text-sm text-slate-500 dark:text-[#a19db9]">System: D&D 5e • 4 Players</p>
                                        </div>
                                    </div>
                                </Link>
                                <div class="group flex flex-col bg-white dark:bg-surface-dark rounded-xl overflow-hidden border border-slate-200 dark:border-[#2b2839] hover:border-primary dark:hover:border-primary/50 transition-all hover:shadow-xl hover:shadow-primary/10 hover:-translate-y-1 cursor-pointer h-full">
                                    <div class="h-48 w-full bg-cover bg-center relative" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuAV5s-ZAHuhA5I4E9v-duo4tPRIfeHwVcxlLXE_JEkJKVjN0Kh2Rz74ifaIsWuhjD_yYPl6UpFfMyCHF4rTuwMKvgW0SSpFSS9ZPTq04aFQNqfio3Uthv6XI6I7r_yM7isJALtpASTTb9kiQnhs_bCV0nEA3SIJmZD0H0XgfGyNvY00E_yANw6ee989kceRKo1lJbJzHS19zcEMyB4zI8EU0cXutJBIWkdjZCrBvnfwQ_zhcSJ4FUCv7kKHcMFH22tUs8wMj4zvLm8")'}}>
                                         <div class="absolute top-3 right-3 bg-black/60 backdrop-blur-sm text-white text-xs font-bold px-2 py-1 rounded border border-white/10">LVL 1</div>
                                    </div>
                                    <div class="p-5 flex flex-col flex-1 gap-4">
                                        <div>
                                            <h3 class="text-xl font-bold dark:text-white mb-1 group-hover:text-primary transition-colors">Eberron: The Last War</h3>
                                            <p class="text-sm text-slate-500 dark:text-[#a19db9]">System: D&D 5e • 5 Players</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            )
        }

        const ChapterDetailsScreen = () => {
            return (
                <div class="flex flex-col h-full w-full">
                    <TopNav />
                    <div class="flex flex-1 overflow-hidden">
                        <CampaignSidebar />
                        <main class="flex-1 overflow-y-auto w-full relative">
                            <div class="px-4 md:px-8 lg:px-12 py-8 max-w-[1400px] mx-auto w-full">
                                <nav class="flex flex-wrap gap-2 mb-6 items-center">
                                    <Link to="/campaign-details" class="text-text-secondary text-sm font-medium hover:text-white transition-colors">The Azure King</Link>
                                    <span class="text-text-secondary text-sm font-medium">/</span>
                                    <span class="text-primary text-sm font-medium">Chapter 3: The Swamp</span>
                                </nav>
                                <div class="flex flex-col lg:flex-row gap-8 mb-8">
                                    <div class="flex-1">
                                        <h1 class="text-white text-3xl lg:text-4xl font-black leading-tight tracking-tight mb-2">Chapter 3: The Swamp</h1>
                                        <p class="text-text-secondary text-base font-normal max-w-2xl">A treacherous journey through the sunken lands to find the ancient relic of the drowned king.</p>
                                        <div class="flex gap-3 flex-wrap mt-4">
                                            <div class="flex h-7 items-center justify-center gap-x-2 rounded-lg bg-surface-dark border border-border-dark px-3">
                                                <span class="material-symbols-outlined text-yellow-500 text-[16px]">star</span>
                                                <p class="text-white text-xs font-semibold uppercase tracking-wide">Level 3-5</p>
                                            </div>
                                            <div class="flex h-7 items-center justify-center gap-x-2 rounded-lg bg-surface-dark border border-border-dark px-3">
                                                <span class="material-symbols-outlined text-green-500 text-[16px]">check_circle</span>
                                                <p class="text-white text-xs font-semibold uppercase tracking-wide">In Progress</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex flex-col lg:flex-row gap-8 pb-12">
                                    <div class="w-full lg:w-2/3 flex flex-col gap-4">
                                        <h3 class="text-lg font-bold text-white flex items-center gap-2">
                                            <span class="material-symbols-outlined text-primary text-[20px]">menu_book</span>
                                            Chapter Chronicles
                                        </h3>
                                        <div class="flex flex-col w-full rounded-xl border border-border-dark bg-surface-dark overflow-hidden min-h-[500px] shadow-lg p-6">
                                            <h2 class="text-xl font-bold text-white mb-4">The Arrival at Bogwater</h2>
                                            <p class="mb-4 text-sm text-gray-300">The party arrived at the edge of the swamp just as the sun began to set, casting long, eerie shadows across the murky water. The air was thick with the scent of decay and damp earth.</p>
                                            <div class="my-6 p-4 border-l-4 border-yellow-600 bg-yellow-600/10 rounded-r-lg">
                                                <p class="text-yellow-200 text-sm italic"><strong>DM Note:</strong> If the players choose to light a fire, roll for a random encounter immediately.</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="w-full lg:w-1/3 flex flex-col gap-6">
                                        <Link to="/scene-editor" class="flex items-center justify-center gap-2 h-11 w-full rounded-lg bg-primary hover:bg-primary/90 text-white font-bold text-sm shadow-lg transition-colors">
                                            <span class="material-symbols-outlined text-[18px]">add</span>
                                            New Adventure
                                        </Link>
                                        <div class="flex flex-col gap-4">
                                            <div class="flex items-center justify-between pb-2 border-b border-border-dark">
                                                <h3 class="text-base font-bold text-white">Adventures</h3>
                                            </div>
                                            <Link to="/scene-editor" class="group relative flex flex-col gap-2 p-3 rounded-xl border border-border-dark bg-surface-dark hover:border-primary/50 cursor-pointer transition-all">
                                                <h4 class="text-white font-bold text-sm group-hover:text-primary transition-colors">The Sunken Temple</h4>
                                                <p class="text-text-secondary text-xs">Exploring the ruins to find the entrance to the lower levels.</p>
                                            </Link>
                                            <Link to="/encounter-runner" class="group relative flex flex-col gap-2 p-3 rounded-xl border-l-4 border-l-primary border-y border-r border-border-dark bg-[#181621] hover:bg-surface-dark cursor-pointer transition-all">
                                                <div class="flex justify-between items-start">
                                                    <h4 class="text-white font-bold text-sm group-hover:text-primary transition-colors">Whispers in the Mist</h4>
                                                </div>
                                                <p class="text-text-secondary text-xs">Navigating the fog maze. Active Combat.</p>
                                                <div class="flex items-center gap-1.5 mt-1">
                                                    <span class="w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"></span>
                                                    <span class="text-[10px] font-medium text-blue-400">In Progress</span>
                                                </div>
                                            </Link>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </main>
                    </div>
                </div>
            )
        }

        const MapsScreen = () => {
            return (
                 <div class="flex flex-col h-full w-full">
                    <TopNav />
                    <div class="flex flex-1 overflow-hidden">
                        <CampaignSidebar />
                        <main class="flex-1 flex flex-col min-w-0 bg-background-dark relative overflow-hidden">
                            <div class="px-8 py-6 border-b border-border-dark bg-background-dark flex flex-wrap gap-4 items-center justify-between shrink-0">
                                <div>
                                    <div class="flex items-center gap-2 text-sm text-gray-500 mb-1">
                                        <span>Campaigns</span><span class="material-symbols-outlined text-[14px]">chevron_right</span>
                                        <span>Azure King</span><span class="material-symbols-outlined text-[14px]">chevron_right</span>
                                        <span class="text-white">Maps</span>
                                    </div>
                                    <h2 class="text-3xl font-bold text-white tracking-tight">Atlas: Kingdom of Aethelgard</h2>
                                </div>
                            </div>
                            <div class="flex-1 overflow-y-auto p-8">
                                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                                    <div class="group relative flex flex-col bg-surface-light rounded-xl border-2 border-primary shadow-xl overflow-hidden cursor-pointer">
                                        <div class="relative aspect-video w-full overflow-hidden bg-gray-900">
                                            <div class="absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-105" style={{backgroundImage: 'url("https://placeholder.pics/svg/300")'}}></div>
                                            <div class="absolute top-3 left-3 flex flex-wrap gap-2">
                                                <span class="px-2 py-0.5 rounded text-[10px] font-bold bg-purple-600/90 text-white uppercase tracking-wider backdrop-blur-sm shadow-sm">World</span>
                                            </div>
                                        </div>
                                        <div class="p-4 flex flex-col gap-1">
                                            <h3 class="text-base font-semibold text-white truncate pr-2">Continental Map</h3>
                                            <div class="flex items-center gap-2 text-xs text-gray-400">
                                                <span>Edited 2h ago</span>
                                            </div>
                                        </div>
                                    </div>
                                     <div class="group relative flex flex-col bg-surface-light rounded-xl border border-border-dark overflow-hidden hover:border-gray-500 transition-all">
                                        <div class="relative aspect-video w-full overflow-hidden bg-gray-900">
                                            <div class="absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-105" style={{backgroundImage: 'url("https://placeholder.pics/svg/300")'}}></div>
                                            <div class="absolute top-3 left-3 flex flex-wrap gap-2">
                                                <span class="px-2 py-0.5 rounded text-[10px] font-bold bg-red-600/90 text-white uppercase tracking-wider backdrop-blur-sm shadow-sm">Battle</span>
                                            </div>
                                        </div>
                                        <div class="p-4 flex flex-col gap-1">
                                            <h3 class="text-base font-semibold text-white truncate pr-2">Tavern Basement</h3>
                                            <div class="flex items-center gap-2 text-xs text-gray-400">
                                                <span>30x30 Grid</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </main>
                    </div>
                </div>
            )
        }

        const EntitiesScreen = () => {
             return (
                 <div class="flex flex-col h-full w-full">
                    <TopNav />
                    <div class="flex flex-1 overflow-hidden">
                        <CampaignSidebar />
                         <main class="flex-1 flex flex-col h-full overflow-hidden bg-background-light dark:bg-background-dark relative">
                            <div class="w-full px-8 pt-8 pb-4 flex flex-col gap-6 shrink-0 z-10">
                                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                                    <h2 class="text-3xl font-bold tracking-tight text-slate-900 dark:text-white">Entities</h2>
                                    <div class="flex items-center gap-3">
                                        <button class="flex items-center gap-2 px-4 py-2.5 rounded-lg bg-primary hover:bg-primary-hover text-white shadow-lg shadow-primary/30 transition-all hover:shadow-primary/50">
                                            <span class="material-symbols-outlined text-[20px]">add</span>
                                            <span class="text-sm font-bold">Create Entity</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                             <div class="flex-1 overflow-y-auto px-8 pb-8">
                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-6">
                                     <div class="group relative flex flex-col bg-white dark:bg-surface-dark rounded-xl overflow-hidden border border-slate-200 dark:border-slate-800 hover:border-primary/50 cursor-pointer">
                                        <div class="h-40 w-full bg-cover bg-center relative" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuCJvDD5kBzULxD0I5dBAXGMYoc3urUZ69CmOTI8DPsD-Hyf5eyjrZMZrhz4ffE1jVYEc4PjQDQOoYk61YsjVbEje_HzmI4bC_BJTOtAAxcPZ7vg-rwBUCS9J8eebmSbG2jL_i3C8NQXNJjKAcwBQJ2DRhxW0i46TezlbOtHX3YT5DIR-P0IX7RyoOA_pKgpL9A_Vu2cp88TZd_ElIwd5c8rDOyMAzlSmOWKbs3jSoQ79IM3CikHPar3Chr31XPEwCypfXfV2ME0mfU")'}}>
                                            <div class="absolute top-2 right-2">
                                                <span class="bg-black/60 backdrop-blur-sm text-white text-xs font-bold px-2 py-1 rounded border border-white/10 uppercase tracking-wider">NPC</span>
                                            </div>
                                        </div>
                                        <div class="p-4 flex flex-col flex-1">
                                            <h3 class="text-slate-900 dark:text-white text-lg font-bold leading-tight group-hover:text-primary transition-colors">Grom Ironbeard</h3>
                                            <p class="text-slate-500 dark:text-slate-400 text-sm">Dwarf • Blacksmith</p>
                                        </div>
                                    </div>
                                    <div class="group relative flex flex-col bg-white dark:bg-surface-dark rounded-xl overflow-hidden border border-slate-200 dark:border-slate-800 hover:border-primary/50 cursor-pointer">
                                        <div class="h-40 w-full bg-cover bg-center relative" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuBFEFWXbGru4QQXXs18oaez1tCiH7sd0MbxxtNFwZImkz9OyFU3MLWeUh25FvXkAfZrR2EaiSR1kzlCFNXSRpdPNsyexrs3I0a6PaeswQBnkXTH9_0zReddpja87X2ffKFGDP_RnS9sNI_FdskWLltS2iWdJY7j9ocBrF76E2IrXXEQ-tUmey8ehRqqym3rZ9V7XWM6woNDzLIUYgPihkyIr51nFT8BIdxq7NrCgkw1SeDGyAPRSIHG-i0mwm5mH_j_zQzl77lqR50")'}}>
                                            <div class="absolute top-2 right-2">
                                                <span class="bg-red-900/80 backdrop-blur-sm text-white text-xs font-bold px-2 py-1 rounded border border-white/10 uppercase tracking-wider">Monster</span>
                                            </div>
                                        </div>
                                        <div class="p-4 flex flex-col flex-1">
                                            <h3 class="text-slate-900 dark:text-white text-lg font-bold leading-tight group-hover:text-primary transition-colors">Cave Goblin</h3>
                                            <p class="text-slate-500 dark:text-slate-400 text-sm">Humanoid • Goblinoid</p>
                                        </div>
                                    </div>
                                </div>
                             </div>
                         </main>
                    </div>
                 </div>
             )
        }

        const GroupsScreen = () => {
             return (
                 <div class="flex flex-col h-full w-full">
                    <TopNav />
                    <main class="flex-1 flex flex-col overflow-hidden relative">
                        <header class="flex-shrink-0 px-8 py-6 z-10">
                             <div class="flex items-center gap-3">
                                <h2 class="text-3xl md:text-4xl font-black tracking-tight text-slate-900 dark:text-white">The Sunday Crew</h2>
                                <button class="text-slate-400 hover:text-primary transition-colors">
                                    <span class="material-symbols-outlined text-[20px]">edit</span>
                                </button>
                            </div>
                            <p class="text-slate-500 dark:text-slate-400 font-medium mt-2">Campaign Level 5 • Next Session: Oct 24th</p>
                        </header>
                         <div class="flex-1 overflow-y-auto px-8 pb-8 z-10">
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                                <div class="group relative flex flex-col bg-white dark:bg-surface-dark rounded-xl overflow-hidden border border-slate-200 dark:border-white/5 shadow-sm hover:shadow-md hover:border-primary/50 transition-all duration-300">
                                    <div class="relative aspect-[4/3] overflow-hidden">
                                        <div class="absolute inset-0 bg-cover bg-center transition-transform duration-500 group-hover:scale-105" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuDp9Hd6yrfgUNwVNkD8egEKJn_sDDEQH66AjUQiEHX2yNLhA84bW2hxO0jCOLKro7-rrmbXU4JEfR3dMlRQXb5jkZLA2WDSLN4xk3zdX0quX46nuJaOyt0GhqT1Y4oJ4F06JS2fFS_YG_OkWE4-8quKDIMtOIEOmwj7dGLZ5Uz8DjM8eNr5QfJl7G1DqWi8NYKtcfhSE1IhxVd9mxh3bONI3Uzf52R9VQ180OHOxgWyg7glle8EVBe_40n5xBC74u8nNaFCmhrUuHY")'}}></div>
                                        <div class="absolute bottom-0 left-0 p-4 w-full bg-gradient-to-t from-black/80 to-transparent">
                                            <h3 class="text-white text-lg font-bold truncate leading-tight">Valeros</h3>
                                            <p class="text-slate-300 text-sm font-medium truncate">Human Fighter (Lvl 5)</p>
                                        </div>
                                    </div>
                                    <div class="p-4 flex items-center justify-between">
                                         <div class="flex items-center gap-2">
                                            <div class="w-6 h-6 rounded-full bg-slate-200 dark:bg-slate-700 bg-cover bg-center" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuCH_OLuDg1JxHRtHF5xGTRI_63-tLLFegHaItS6PCJsbc7Dmlq_n5ep8ELkm0BHvbcGROAvbFCLkJAuX_v_LSmWckBC3DYx4gjYGw7PQgiJw_Z_bnZYFNA1BDy9dJerTZXqKetNhmCrztZbyEdMxhphpC8xJaTSg9RZi9gpC2pzudK86JHbz6V0CR5qin6BGP7ZBcNj8g9Rw6_8XNLT_9HcRGahXKZ2k9y4dWD0xHXU0-9V1aKF5Qlx3TQK5Rm1ps9FiPYI2yXd3Xc")'}}></div>
                                            <span class="text-xs text-slate-500 dark:text-slate-400 font-medium">Played by <span class="text-slate-700 dark:text-slate-200">John</span></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>
                 </div>
             )
        }

        const CompendiumScreen = () => {
            return (
                <div class="flex flex-col h-full w-full">
                    <TopNav />
                    <div class="flex flex-1 overflow-hidden p-6 gap-6 flex-col lg:flex-row max-w-[1600px] mx-auto w-full">
                        <div class="flex flex-col w-full lg:w-[400px] shrink-0 h-full gap-4">
                            <h1 class="text-3xl font-black tracking-tight text-white">Compendium</h1>
                            <div class="relative w-full">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400 material-symbols-outlined">search</span>
                                <input class="w-full h-12 rounded-xl border-0 bg-surface-dark pl-10 pr-4 text-white placeholder-gray-500 focus:ring-2 focus:ring-primary" placeholder="Search spells, monsters..." type="text" />
                            </div>
                             <div class="flex-1 overflow-y-auto space-y-2">
                                <div class="group relative flex cursor-pointer flex-col gap-1 rounded-lg border-l-4 border-primary bg-[#262338] p-4 shadow-md transition-all">
                                    <div class="flex justify-between items-start">
                                        <h3 class="font-bold text-white group-hover:text-primary-300">Fireball</h3>
                                        <span class="rounded bg-primary/20 px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider text-primary-200">Spell</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-xs text-gray-400">
                                        <span>Level 3 Evocation</span>
                                    </div>
                                </div>
                                 <div class="group relative flex cursor-pointer flex-col gap-1 rounded-lg border-l-4 border-transparent bg-surface-dark p-4 transition-all hover:bg-[#262338]">
                                    <div class="flex justify-between items-start">
                                        <h3 class="font-bold text-gray-200">Fire Giant</h3>
                                        <span class="rounded bg-red-500/10 px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider text-red-300">Monster</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-xs text-gray-500">
                                        <span>CR 9</span>
                                    </div>
                                </div>
                             </div>
                        </div>
                        <div class="flex-1 h-full overflow-hidden rounded-2xl bg-surface-dark border border-white/5 relative shadow-2xl">
                             <div class="relative bg-[#1A1625] px-8 pt-10 pb-8">
                                 <div class="relative z-10">
                                    <div class="flex items-center gap-3 mb-2">
                                        <span class="material-symbols-outlined text-primary text-3xl">local_fire_department</span>
                                        <h1 class="text-4xl font-black text-white tracking-tight">Fireball</h1>
                                    </div>
                                    <p class="text-lg text-primary font-serif italic">3rd-level evocation</p>
                                </div>
                             </div>
                             <div class="p-8 text-gray-300 leading-relaxed space-y-6 max-w-4xl overflow-y-auto h-[calc(100%-140px)]">
                                <p>A bright streak flashes from your pointing finger to a point you choose within range and then blossoms with a low roar into an explosion of flame. Each creature in a 20-foot-radius sphere centered on that point must make a Dexterity saving throw. A target takes <span class="text-primary font-bold">8d6 fire damage</span> on a failed save, or half as much damage on a successful one.</p>
                             </div>
                        </div>
                    </div>
                </div>
            )
        }

        const SettingsScreen = () => {
             return (
                 <div class="flex flex-col h-full w-full">
                    <TopNav />
                    <div class="layout-container flex h-full grow flex-col max-w-[1440px] mx-auto w-full">
                        <div class="flex flex-1 justify-center py-5 px-4 md:px-10 lg:px-20 xl:px-40">
                             <div class="layout-content-container flex flex-col max-w-[960px] flex-1 gap-8">
                                <h1 class="text-4xl font-black leading-tight tracking-[-0.033em] text-gray-900 dark:text-white">Settings</h1>
                                <div class="flex flex-col lg:flex-row gap-6">
                                    <aside class="w-full lg:w-64 flex-shrink-0">
                                         <div class="flex flex-col gap-2 p-4 rounded-xl bg-white dark:bg-[#121118] border border-gray-200 dark:border-[#2b2839]">
                                            <div class="flex items-center gap-3 px-3 py-2 rounded-lg bg-primary/10 text-primary dark:bg-[#2b2839] dark:text-white cursor-pointer">
                                                <span class="material-symbols-outlined text-[24px]">person</span>
                                                <p class="text-sm font-medium leading-normal">Profile</p>
                                            </div>
                                             <div class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-600 dark:text-[#a19db9] hover:bg-gray-100 dark:hover:bg-[#1e1b2e] cursor-pointer transition-colors">
                                                <span class="material-symbols-outlined text-[24px]">shield</span>
                                                <p class="text-sm font-medium leading-normal">Account</p>
                                            </div>
                                         </div>
                                    </aside>
                                    <main class="flex-1 flex flex-col gap-6">
                                        <section class="rounded-xl bg-white dark:bg-[#121118] border border-gray-200 dark:border-[#2b2839] overflow-hidden">
                                            <div class="px-6 py-4 border-b border-gray-200 dark:border-[#2b2839]">
                                                <h2 class="text-[22px] font-bold leading-tight tracking-[-0.015em] text-gray-900 dark:text-white">Profile Information</h2>
                                            </div>
                                            <div class="p-6 flex flex-col gap-6">
                                                 <div class="flex items-center gap-4">
                                                    <div class="bg-center bg-no-repeat bg-cover rounded-full h-24 w-24 ring-4 ring-primary/20" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuB4zDqwFySSLQH6GuzkEX3TkQdcf0P0dVDyIGn0ZafUnkNKdY-q4WB5kDBjaCytFmNFlRG4Ddys2gKaItkSflRmFz69xoHSnwJVAp6JCIfNLZFesqSO9-3fSN8nT8e1SYbjImQ0nZhhImvtw4ZqQLY3-CPTeujhvdhquwdaDo8SJvOAs1-UeSEJ735fqPqmcsjbX3HYktPEvcDN68AGb9V-_n9s25fSQ212sUujIrJ6ttkH2jPq95Tj61EBcYN3qfpD7MT4h_tT5YU")'}}></div>
                                                    <div class="flex flex-col">
                                                        <p class="text-[22px] font-bold leading-tight tracking-[-0.015em] text-gray-900 dark:text-white">Archmage Vex</p>
                                                        <p class="text-gray-500 dark:text-[#a19db9] text-sm">Dungeon Master</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </section>
                                    </main>
                                </div>
                             </div>
                        </div>
                    </div>
                 </div>
             )
        }

        const EncounterRunnerScreen = () => {
             return (
                 <div class="flex flex-col h-full w-full">
                     <TopNav />
                     <main class="flex-1 flex flex-col h-full min-w-0 overflow-hidden relative">
                        <div class="bg-background-dark border-b border-border-dark px-6 py-4 flex flex-col gap-4 shrink-0">
                             <div class="flex flex-wrap items-center justify-between gap-4">
                                 <div class="flex flex-col gap-1">
                                    <div class="flex items-center gap-3">
                                        <h2 class="text-white text-2xl font-bold font-display">Ambush at Goblin Creek</h2>
                                        <span class="bg-red-500/20 text-red-400 border border-red-500/30 text-xs font-bold px-2 py-0.5 rounded uppercase tracking-wide">Combat Active</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-text-secondary text-sm">
                                        <span class="material-symbols-outlined text-base">timelapse</span>
                                        <span>Round 3</span>
                                    </div>
                                </div>
                                <div class="flex items-center gap-3">
                                     <button class="h-9 px-4 rounded-lg bg-red-500/10 border border-red-500/50 text-red-400 text-sm font-medium hover:bg-red-500/20 flex items-center gap-2 transition-colors">
                                        <span class="material-symbols-outlined text-lg">flag</span>
                                        End Encounter
                                    </button>
                                </div>
                             </div>
                        </div>
                        <div class="flex-1 overflow-hidden p-4 lg:p-6">
                             <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 h-full">
                                <div class="lg:col-span-3 flex flex-col bg-surface-dark rounded-xl border border-border-dark overflow-hidden h-full shadow-lg">
                                     <div class="p-4 border-b border-border-dark flex items-center justify-between bg-[#1a1a20]">
                                        <h3 class="text-white font-bold flex items-center gap-2">
                                            <span class="material-symbols-outlined text-primary">format_list_numbered</span>
                                            Initiative
                                        </h3>
                                    </div>
                                    <div class="flex-1 overflow-y-auto p-2 space-y-2">
                                         <div class="group flex items-center gap-3 bg-primary/10 border-l-4 border-primary p-3 rounded-r-lg cursor-pointer relative overflow-hidden transition-all hover:bg-primary/20">
                                            <div class="relative shrink-0">
                                                <img alt="Orc Portrait" class="size-10 rounded-full object-cover border-2 border-primary" src="https://lh3.googleusercontent.com/aida-public/AB6AXuCuQOtzcXLA7Cg3WC5SIWTnNii2V9e2Yit2_g328qvdZ5LmyCUAKZ7z61F732xHLORTUGx85_2fKKMK8YjhNOLzYYvx6Zl0NSq1pTwCAC0TJLJUjYV4832zDYHpN0W1WqsEC_Kb9NEfbvKFsUn8PPch7J4rNkef3IDzrc2CFClNrAgwcLXzAjAUJDO6WQbtXqQr8NH-xZ5tdd9PrYI-o9rJp0CBy_cEv_KqX0iLsDo9Tb4O5om6XZWvKdsDFRQ-4GyBczUGThUM6f4"/>
                                            </div>
                                            <div class="flex-1 min-w-0 relative z-10">
                                                <div class="flex justify-between items-center mb-0.5">
                                                    <h4 class="text-white text-sm font-bold truncate">Grom</h4>
                                                    <span class="text-primary text-xs font-bold">22</span>
                                                </div>
                                                 <div class="w-full bg-[#3f3b54] h-1.5 rounded-full overflow-hidden">
                                                    <div class="bg-red-500 h-full rounded-full" style={{width: '65%'}}></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="lg:col-span-6 flex flex-col h-full overflow-hidden gap-4">
                                     <div class="bg-surface-dark border border-border-dark rounded-xl p-5 shadow-lg flex flex-col gap-5 relative overflow-hidden">
                                        <div class="flex items-start justify-between gap-4 z-10">
                                            <div class="flex items-center gap-4">
                                                 <div class="size-20 rounded-xl overflow-hidden border-2 border-border-dark shadow-lg shrink-0">
                                                    <img alt="Grom Full Portrait" class="w-full h-full object-cover" src="https://lh3.googleusercontent.com/aida-public/AB6AXuC68uldVMeY4aIv78v9WNsh88WomCy5nzEgAlW3aEuwEneX6WMiG52HWKsZ97pHAPekaepbkTrFDwTSEXJQJn2qPmIRK9SLT2nXHdskBrcrwf45OKV3mGn22e_z2eayK3YeByUe5O0edqSKWxwvtpwu7sJUYY0TaRAJjsHgA3F4wnULvuRASJy1EVI_6AttcOzx3Tzk9MQMx1nwtryAe91rjGYfD569Tb_Y4uH-caV5GZ5j_HzoOaBfGQWLABkrAsSAoXx_UNxHw5c"/>
                                                </div>
                                                <div>
                                                    <h2 class="text-2xl font-bold text-white mb-1">Grom the Destroyer</h2>
                                                    <p class="text-text-secondary text-sm mb-2">Level 5 Barbarian</p>
                                                </div>
                                            </div>
                                            <div class="flex flex-col items-end gap-2">
                                                <span class="text-2xl font-bold text-white font-mono">45/68 HP</span>
                                            </div>
                                        </div>
                                     </div>
                                </div>
                             </div>
                        </div>
                     </main>
                 </div>
             )
        }
        
         const SceneEditorScreen = () => {
             return (
                 <div class="flex flex-col h-full w-full">
                     <TopNav />
                     <div class="flex flex-1 overflow-hidden relative">
                         <aside class="w-64 bg-surface-dark border-r border-border-dark flex flex-col shrink-0 z-10">
                            <div class="p-3 border-b border-border-dark">
                                <button class="flex w-full items-center justify-between gap-2 px-2 py-1.5 rounded-md bg-surface-darker border border-white/5 hover:border-white/10 transition-colors">
                                     <span class="text-white text-sm font-medium truncate">Curse of Strahd</span>
                                </button>
                            </div>
                            <div class="p-2 flex-1 overflow-y-auto">
                                <div class="mt-4 mb-2 px-2">
                                    <h3 class="text-[#5f5b74] text-xs font-bold uppercase tracking-wider">Campaign Content</h3>
                                </div>
                                <div class="space-y-1">
                                    <button class="flex w-full items-center gap-2 px-2 py-1.5 rounded-md hover:bg-surface-darker text-left group">
                                        <span class="material-symbols-outlined text-amber-500 text-[18px]">folder</span>
                                        <span class="text-white text-sm font-medium">Chapter 1: The Mist</span>
                                    </button>
                                </div>
                            </div>
                         </aside>
                         <main class="flex-1 overflow-y-auto bg-background-dark relative scroll-smooth">
                            <div class="max-w-[850px] mx-auto px-8 py-8 pb-32 min-h-full flex flex-col">
                                <nav class="flex flex-wrap gap-2 mb-4 text-sm">
                                    <span class="text-[#a19db9] font-medium">Chapter 2 / Ambush at Bridge / The Ambush</span>
                                </nav>
                                <div class="mb-6">
                                    <h1 class="text-4xl font-bold text-white tracking-tight mb-4 outline-none" contentEditable="true">The Ambush at Blackwood Bridge</h1>
                                    <div class="flex flex-wrap gap-2">
                                        <div class="flex h-7 items-center justify-center gap-x-2 rounded-full bg-red-500/10 border border-red-500/20 px-3">
                                            <p class="text-red-400 text-xs font-semibold uppercase tracking-wide">Combat</p>
                                        </div>
                                    </div>
                                </div>
                                <article class="text-lg leading-relaxed text-[#c4c0d6] min-h-[500px] outline-none" contentEditable="true">
                                    <div class="bg-primary/10 border-l-4 border-primary p-4 italic text-white mb-6 rounded-r-lg">
                                        "As you step onto the ancient timbers of Blackwood Bridge, the forest sounds abruptly cease. The rushing water below seems unusually loud, masking the snap of twigs on the far bank."
                                    </div>
                                    <p class="mb-4">The bridge is approximately 40 feet long and 10 feet wide. It is slick with moss and moisture from the river below.</p>
                                    <h2 class="text-white font-bold text-2xl mt-6 mb-3">The Ambush</h2>
                                    <p class="mb-4">Hiding in the dense foliage on the northern bank are three Goblin Archers and one Goblin Shaman.</p>
                                </article>
                            </div>
                         </main>
                         <aside class="w-80 bg-surface-dark border-l border-border-dark flex flex-col shrink-0 overflow-y-auto hidden xl:flex">
                             <div class="p-5 border-b border-border-dark">
                                 <div class="flex items-center justify-between mb-4">
                                     <h4 class="text-xs font-bold text-[#a19db9] uppercase tracking-wider">Active Encounter</h4>
                                     <span class="px-2 py-0.5 rounded-full bg-red-500/20 text-red-400 text-[10px] font-bold border border-red-500/30">HARD</span>
                                 </div>
                                 <div class="bg-surface-darker rounded-lg p-3 border border-white/5 hover:border-primary/50 transition-colors cursor-pointer group">
                                     <div class="flex items-center gap-3 mb-3">
                                         <div class="size-10 bg-red-900/40 rounded-md flex items-center justify-center text-red-400">
                                             <span class="material-symbols-outlined">swords</span>
                                         </div>
                                         <div>
                                             <div class="text-white font-bold text-sm">Bridge Ambush</div>
                                             <div class="text-[#a19db9] text-xs">CR 5 • 850 XP</div>
                                         </div>
                                     </div>
                                     <Link to="/encounter-runner" class="block text-center w-full mt-3 py-1.5 bg-primary hover:bg-primary/90 rounded text-xs text-white font-bold transition-colors">Run Encounter</Link>
                                 </div>
                             </div>
                         </aside>
                     </div>
                 </div>
             )
        }


        // --- App Component ---

        const App = () => {
            return (
                <MemoryRouter>
                    <Routes>
                        <Route path="/" element={<LoginScreen />} />
                        <Route path="/dashboard" element={<DashboardScreen />} />
                        <Route path="/campaign-details" element={<CampaignDetailsScreen />} />
                        <Route path="/chapter-details" element={<ChapterDetailsScreen />} />
                        <Route path="/maps" element={<MapsScreen />} />
                        <Route path="/entities" element={<EntitiesScreen />} />
                        <Route path="/groups" element={<GroupsScreen />} />
                        <Route path="/compendium" element={<CompendiumScreen />} />
                        <Route path="/settings" element={<SettingsScreen />} />
                        <Route path="/encounter-runner" element={<EncounterRunnerScreen />} />
                        <Route path="/scene-editor" element={<SceneEditorScreen />} />
                        <Route path="/encounters" element={<SceneEditorScreen />} /> {/* Reuse scene editor for encounter list view in this demo */}
                    </Routes>
                </MemoryRouter>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>